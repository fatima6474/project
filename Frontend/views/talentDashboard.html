<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>

    
    <link rel="stylesheet" href="talentDashboard.css">
    <title>Dashboard</title>
</head>
<body>



    <div class="container">
        <h1>REGISTER YOUR TALENT WITH US</h1>
        <h3>Welcome to Skill Work Community<span></span></h3>
        <p>Complete your profile to join our global community of freelancers and start
            selling your services to our growing network of businesses</p>
            <form id="form" enctype="multipart/form-data">
<!-- Update the file input with Cloudinary's upload widget -->
<label for="image">Profile Image</label>
<img id="profileImage" src="" alt="Profile Image">
<input type="file" id="image" name="image" class="pictures" accept="image/*">
<div id="imageHolder"></div>
<br>

            <input id="Name" type="text" placeholder="Your Name">
        <br> <br>



            <label for="PhoneNumber">Phone Number</label><br>
            <input id="PhoneNumber" type="number" placeholder="Your Phone Number">
        <br>

            <label for="Email">Email</label><br>
            <input id="Email" type="text" placeholder="Your Email">
        
            <!-- <input type="file" name="avatar" id="image"/> -->
            
            <!-- ... (other existing form fields) ... -->
            

            <div id="imageHolder"></div>
            <div class="input-tab">
                <label for="Job_Title">Job Title</label>
                <select id="Job_Title">
                    <option value="houserepair">House Repair</option>
                    <option value="makeup">Make Up</option>
                    <option value="catering">Catering Services</option>
                    <option value="security">Security Guard</option>
                    <option value="painters">Painters</option>
                    <option value="driver">Driver</option>
                    <option value="delivery">Delivery</option>
                    <option value="laundry">Laundry Services</option>
                    <option value="hairdressers">Hair Dressers</option>
                    <!-- <option value="furnitures">Furnitures</option> -->
                    <option value="bakers">Bakers</option>
                    <option value="assistant">Assistant</option>
                    <!-- <option value="salesperson">salesperson</option> -->
                </select>
                <p id="jobtitleErrorMsg"></p>
            </div>
            
            <div class="textarea">
                <label for="About">About</label>
                <textarea id="About"></textarea>
                <p id="AboutErrorMsg"></p>
            </div>
            
            <div class="input-tab">
                <label for="Location">Location</label>
                <select id="Location">
                    <option value="Abia">Abia</option>
                    <option value="Adamawa">Adamawa</option>
                    <option value="Akwa-Ibom">Akwa Ibom</option>
                    <option value="Anambra">Anambra</option>
                    <option value="Bauchi">Bauchi</option>
                    <option value="Bayelsa">Bayelsa</option>
                    <option value="Benue">Benue</option>
                    <option value="Borno">Borno</option>
                    <option value="Cross-River">Cross River</option>
                    <option value="Delta">Delta</option>
                    <option value="Ebonyi">Ebonyi</option>
                    <option value="Edo">Edo</option>
                    <option value="Ekiti">Ekiti</option>
                    <option value="Enugu">Enugu</option>
                    <option value="Gombe">Gombe</option>
                    <option value="Imo">Imo</option>
                    <option value="Jigawa">Jigawa</option>
                    <option value="Kaduna">Kaduna</option>
                    <option value="Kano">Kano</option>
                    <option value="Katsina">Katsina</option>
                    <option value="Kebbi">Kebbi</option>
                    <option value="Kogi">Kogi</option>
                    <option value="Kwara">Kwara</option>
                    <option value="Lagos">Lagos</option>
                    <option value="Nasarawa">Nasarawa</option>
                    <option value="Niger">Niger</option>
                    <option value="Ogun">Ogun</option>
                    <option value="Ondo">Ondo</option>
                    <option value="Osun">Osun</option>
                    <option value="Oyo">Oyo</option>
                    <option value="Plateau">Plateau</option>
                    <option value="Rivers">Rivers</option>
                    <option value="Sokoto">Sokoto</option>
                    <option value="Taraba">Taraba</option>
                    <option value="Yobe">Yobe</option>
                    <option value="Zamfara">Zamfara</option>
                </select>
                <p id="LocationxErrorMsg"></p>
            </div>
            
            <div class="input-tab">
                <label for="Language">Language</label>
                <input id="Language" type="text" placeholder="">
                <p id="LanguageErrorMsg"></p>
            </div>
            <div class="input-tab">
                <label for="Hourly Rate">Hourly Rate</label>
                <input id="Hourly_Rate" type="text" placeholder="eg. in Naira ">
                <p id="Hourly_RateErrorMsg"></p>
            </div>
            <div class="btn">
                <button id="submitBtn"  type="submit" >Submit</button>
            </div>
            <!-- <img id="profileImage" src="" alt="Profile Image"> -->
        </form>
        <script>
            document.getElementById("form").addEventListener("submit", async function (event) {
                event.preventDefault();

                try {
                    // Gather form data
                    const name = document.getElementById("Name").value;
                    const phoneNumber = document.getElementById("PhoneNumber").value;
                    const email = document.getElementById("Email").value;
                    const jobTitle = document.getElementById("Job_Title").value;
                    const about = document.getElementById("About").value;
                    const location = document.getElementById("Location").value;
                    const language = document.getElementById("Language").value;
                    const hourlyRate = document.getElementById("Hourly_Rate").value;

                    // Handle image upload using regular HTML file input
                    const imageInput = document.getElementById("image");
                    const selectedImage = imageInput.files[0];

                    // Validate that an image is selected
                    if (!selectedImage) {
                        alert("Please select an image.");
                        return;
                    }

                    // Create a FormData object
                    const formData = new FormData();

                    // Append form data
                    formData.append("name", name);
                    formData.append("phoneNumber", phoneNumber);
                    formData.append("email", email);
                    formData.append("jobTitle", jobTitle);
                    formData.append("about", about);
                    formData.append("location", location);
                    formData.append("language", language);
                    formData.append("hourlyRate", hourlyRate);
                    // formdata.append("image_path", image_path);

                    // Append the image file
                    formData.append("image", selectedImage);

                    const response = await fetch("https://skillworkcommunity.onrender.com/submit", {
            method: "POST",
            body: formData,
        });

        if (response.ok) {
            const result = await response.json();

            console.log("Server Response:", result);

            // Check if the response contains the expected properties
            if (result.message && result.image_path) {
                const formDataLocalStorage = {
                    name,
                    phoneNumber,
                    email,
                    jobTitle,
                    image_path: result.image_path,  // Use image_path from the response
                    about,
                    location,
                    language,
                    hourlyRate,
                };

                // Store form data in local storage
                localStorage.setItem("formData", JSON.stringify(formDataLocalStorage));

                console.log("Form Data Stored in Local Storage:", formDataLocalStorage);

                const profileImage = document.getElementById("profileImage");

                if (result.image_path) {
                    profileImage.src = result.image_path;

                    // Store the image URL in local storage
                    localStorage.setItem("profileImage", result.image_path);
                }

                // Navigate to talentedit.html
                window.location.href = "TalentEdit.html";
            } else {
                console.error("Error submitting form data. Server returned:", result.error);
            }
        } else {
            console.error("Error submitting form data. Server returned:", response.status, response.statusText);
        }
    } catch (error) {
        console.error("Error submitting form data:", error);
    }
});
            // localStorage.clear();
            </script>
            
   
</body>
</html>


